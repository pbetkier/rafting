webpackJsonp([1],{"7Otq":function(e,t,r){e.exports=r.p+"static/img/logo.e7eb12f.png"},E1y3:function(e,t){},IWFi:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("img",{attrs:{src:r("7Otq")}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var n=r("VU/8")({name:"App"},a,!1,function(e){r("E1y3")},null,null).exports,d=r("/ocq"),o=r("mtWM"),i=r.n(o),l={name:"RaftingDashboard",data:function(){return{peer:{},multiplePeers:"",peers:[],states:{},validationError:!1}},methods:{addPeer:function(){this.peers.push(this.peer),this.peer={},this.refreshState()},addMultiplePeers:function(){var e=this;this.multiplePeers.split("\n").forEach(function(t){var r=t.split(" ");if(2!==r.length)throw e.validationError=!0,new Error(t+" has invalid format. The correct format is name separated with address");e.peers.push({name:r[0],address:r[1]}),e.multiplePeers="",e.validationError=!1})},deletePeer:function(e){this.peers=this.peers.filter(function(t){return t!==e})},refreshState:function(){var e=this;this.peers.forEach(function(t){i.a.get("http://"+t.address+"/raft/state").then(function(r){e.states[t.address]=r.data,e.$forceUpdate(),console.log(r.data)}).catch(function(r){e.states[t.address]="error",e.$forceUpdate(),console.error(r)})})},formatDate:function(e){return new Date(e).toLocaleString()},peerRole:function(e){var t=this.states[e.address];return t&&"error"!==t?t.role:"error"}},created:function(){var e=this;setInterval(function(){return e.refreshState()},5e3)}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Rafting Dashboard")]),e._v(" "),r("div",{staticClass:"add-peer"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.peer.name,expression:"peer.name"}],attrs:{title:"peer address",placeholder:"Name"},domProps:{value:e.peer.name},on:{input:function(t){t.target.composing||e.$set(e.peer,"name",t.target.value)}}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.peer.address,expression:"peer.address"}],attrs:{title:"peer address",placeholder:"Address"},domProps:{value:e.peer.address},on:{input:function(t){t.target.composing||e.$set(e.peer,"address",t.target.value)}}}),e._v(" "),r("button",{staticClass:"confirm-button",on:{click:function(t){e.addPeer()}}},[e._v("Add peer")])]),e._v("\n  or add multiple peers\n  "),r("div",{staticClass:"add-peer"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.multiplePeers,expression:"multiplePeers"}],attrs:{title:"peer address",placeholder:"Name and address separated by space. Multiple nodes are separated by newline"},domProps:{value:e.multiplePeers},on:{input:function(t){t.target.composing||(e.multiplePeers=t.target.value)}}}),e._v(" "),r("button",{staticClass:"confirm-button add-multiple",on:{click:function(t){e.addMultiplePeers()}}},[e._v("Add peers")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.validationError,expression:"validationError"}],staticClass:"validation-error"},[e._v("\n    Invalid format. Name and address should be separated by space.\n    Multiple nodes should be separated by new line.\n  ")]),e._v(" "),e._l(e.peers,function(t){return r("div",{key:t.address,staticClass:"peer",class:{leader:"leader"===e.peerRole(t),follower:"follower"===e.peerRole(t),candidate:"candidate"===e.peerRole(t),error:"error"===e.peerRole(t)}},[r("p",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),r("button",{staticClass:"title delete-button",on:{click:function(r){e.deletePeer(t)}}},[e._v("X")]),e._v(" "),e.states[t.address]&&"error"!==e.states[t.address]?r("table",[r("tr",[r("td",{staticClass:"property"},[e._v("Node ID: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].nodeId))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Role: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].role))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Current Term: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].currentTerm))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Last heartbeat: ")]),e._v(" "),r("td",[e._v(e._s(e.formatDate(e.states[t.address].lastHeartbeat)))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Peers: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].peers.join(", ")))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Voted for: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].votedFor))])]),e._v(" "),r("tr",[r("td",{staticClass:"property"},[e._v("Votes granted: ")]),e._v(" "),r("td",[e._v(e._s(e.states[t.address].votesGranted))])])]):e._e(),e._v(" "),"error"===e.states[t.address]?r("div",{staticClass:"no-data"},[e._v("Error while fetching data ðŸ˜±")]):e._e(),e._v(" "),void 0===e.states[t.address]?r("div",{staticClass:"no-data"},[e._v("No data yet")]):e._e()])})],2)},staticRenderFns:[]};var c=r("VU/8")(l,p,!1,function(e){r("IWFi")},"data-v-e6b78128",null).exports;s.a.use(d.a);var v=new d.a({routes:[{path:"/",name:"RaftingDashboard",component:c}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:v,components:{App:n},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.4e49025dffa338d963fb.js.map